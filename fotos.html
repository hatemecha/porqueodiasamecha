<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="/favicon.ico" />
        <title>fotos • hatemecha</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
        <link rel="stylesheet" href="styles.css" />
        <link rel="stylesheet" href="src/css/components/shared.css" />
        <link rel="stylesheet" href="src/css/components/lightbox.css" />
        <link rel="stylesheet" href="src/css/pages/fotos.css" />
        <style>
            header {
                z-index: 9999;
                background: var(--header-bg) !important;
                transform: translateZ(0);
                isolation: isolate;
            }
        </style>
    </head>
    <body>
        <header></header>

        <div class="page">
            <div class="page-title">fotos</div>

            <div id="gallery" class="gallery"></div>
            <div id="lightbox" aria-hidden="true" role="dialog">
                <button class="close" aria-label="Cerrar">×</button>
                <img alt="vista ampliada" />
            </div>
        </div>

        <script type="module">
            import { createImageLoader } from './src/js/utils/imageLoader.js'
            import { initLightbox } from './src/js/components/lightbox.js'
            import { fotosImages, fotosBasePath } from './src/js/data/images.js'

            const galleryEl = document.getElementById('gallery')
            const loadImage = createImageLoader({ eagerCount: 3 })

            function createItem(src, alt, index) {
                const item = document.createElement('div')
                item.className = 'gallery-item'

                const img = document.createElement('img')
                img.src = src
                img.alt = alt

                loadImage(img, index)

                const link = document.createElement('a')
                link.href = src
                link.target = '_blank'
                link.rel = 'noopener noreferrer'

                item.appendChild(img)
                item.appendChild(link)
                return item
            }

            fotosImages.forEach((name, index) => {
                const src = fotosBasePath + name
                const alt = name.replace(/\.JPG$/i, '')
                galleryEl.appendChild(createItem(src, alt, index))
            })

            initLightbox({ selector: '.gallery-item img' })
        </script>
        <footer></footer>
        <script src="header.js"></script>
        <script src="footer.js"></script>
    </body>
</html>
